{"version":3,"sources":["webpack:///./src/views/ProposalsPage.vue?0fba","webpack:///src/views/ProposalsPage.vue","webpack:///./src/views/ProposalsPage.vue?7494","webpack:///./src/views/ProposalsPage.vue","webpack:///./src/views/ProposalsPage.vue?a6b1"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","on","onLogin","onLogout","staticClass","_v","steemdao","_s","balance","_e","daily_budget","hourly_budget","style","backgroundImage","refAccount","image","name","votes_sp","votes_description","directives","rawName","value","expression","class","error","check_votes_account","attrs","domProps","$event","type","indexOf","_k","keyCode","key","checkVotes","target","composing","checkVotesAccount","errorText","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","sort_order","multiple","_l","p","index","funding_percent","selectProposal","creator","receiver","url","subject","id","active","status","start_date","end_date","total_time","daily_pay","$store","state","auth","saving","save","reset","alert","infoText","successText","dangerText","staticRenderFns","data","proposals","components","HeaderEFTG","mixins","created","getChainProperties","then","watch","methods","sortPayments","sortBy","budget","parseFloat","sbd_balance","i","daily_payment","sort","activeA","activeB","Error","isActive","now","Date","proposal","break_while","witness_vote_weight","no_proxy_vote_weight","account","proxy_vote_weight","Math","floor","vesting_shares","total","parseInt","proxied_vsf_votes","calculate_vote","vote","voter","votes","no_proxy_votes","proxy_votes","witnessVotes2sp","router","toggleVote","newVote","$set","user","activeKey","keys","ownerKey","privKey","showDanger","slice","approve_id_proposals","unapprove_id_proposals","ops","j","push","length","hideSuccess","hideDanger","hideInfo","steem_broadcast_sendOperations","self","showSuccess","loadVotesFromAccount","message","console","log","JSON","parse","stringify","clearVotes","component"],"mappings":"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","file":"js/chunk-0645856a.4a35ca5a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('HeaderEFTG',{ref:\"headerEFTG\",on:{\"login\":_vm.onLogin,\"logout\":_vm.onLogout}}),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6\"},[_c('h2',[_vm._v(\"Proposals\")]),(_vm.steemdao.name)?_c('div',[_vm._v(\"Total fund: \"+_vm._s(_vm.steemdao.balance))]):_vm._e(),(_vm.steemdao.name)?_c('div',[_vm._v(\"Daily budget: \"+_vm._s(_vm.steemdao.daily_budget))]):_vm._e(),(_vm.steemdao.name)?_c('div',[_vm._v(\"Budget for the next hour: \"+_vm._s(_vm.steemdao.hourly_budget))]):_vm._e()]),(_vm.refAccount)?_c('div',{staticClass:\"col-md-6 text-right\"},[_c('div',{staticClass:\"big-image-profile\",style:({ backgroundImage: 'url(' + _vm.refAccount.image + ')' })}),_c('h3',[_vm._v(\"@\"+_vm._s(_vm.refAccount.name))]),_c('div',[_vm._v(_vm._s(_vm.refAccount.votes_sp))]),_c('div',[_vm._v(_vm._s(_vm.refAccount.votes_description))])]):_vm._e()]),_c('div',{staticClass:\"row mt-3\"},[_c('div',{staticClass:\"col-md-2 mr-2 mt-1\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.checkVotesAccount),expression:\"checkVotesAccount\"}],staticClass:\"form-control mr-2\",class:{'is-invalid': _vm.error.check_votes_account},attrs:{\"type\":\"text\",\"placeholder\":\"Account\"},domProps:{\"value\":(_vm.checkVotesAccount)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.checkVotes($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.checkVotesAccount=$event.target.value}}}),(_vm.error.check_votes_account)?_c('div',{staticClass:\"invalid-feedback\"},[_vm._v(_vm._s(_vm.errorText.check_votes_account))]):_vm._e()]),_c('div',{staticClass:\"col-md-2 mt-1\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.checkVotes}},[_vm._v(\"Check votes\")])])]),_c('div',{staticClass:\"row mb-3\"},[_c('div',{staticClass:\"col-12 text-right\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sort_order),expression:\"sort_order\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.sort_order=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"votes\"}},[_vm._v(\"Sort by votes\")]),_c('option',{attrs:{\"value\":\"start_date\"}},[_vm._v(\"Sort by start date\")]),_c('option',{attrs:{\"value\":\"end_date\"}},[_vm._v(\"Sort by end date\")]),_c('option',{attrs:{\"value\":\"total_days\"}},[_vm._v(\"Sort by total days\")]),_c('option',{attrs:{\"value\":\"id\"}},[_vm._v(\"Sort by id\")]),_c('option',{attrs:{\"value\":\"status\"}},[_vm._v(\"Sort by status\")]),_c('option',{attrs:{\"value\":\"creator\"}},[_vm._v(\"Sort by creator\")]),_c('option',{attrs:{\"value\":\"receiver\"}},[_vm._v(\"Sort by receiver\")]),_c('option',{attrs:{\"value\":\"daily_pay\"}},[_vm._v(\"Sort by daily pay\")]),_c('option',{attrs:{\"value\":\"total_pay\"}},[_vm._v(\"Sort by total pay\")])])])]),_c('div',{staticClass:\"card mb-2\"},[_c('ul',{staticClass:\"list-group list-group-flush\"},_vm._l((_vm.proposals),function(p,index){return _c('li',{key:index,staticClass:\"list-group-item\",class:{\n            'total-funding':   p.funding_percent==1,\n            'partial-funding': p.funding_percent >0 && p.funding_percent < 1,\n            'no-funding':      p.funding_percent <=0\n          },on:{\"click\":function($event){return _vm.selectProposal(index)}}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-3\"},[_c('div',{staticClass:\"image-profile mr-2\",style:({ backgroundImage: 'url(' + p.image + ')' })}),_c('span',[_vm._v(_vm._s(p.creator)+\" \"),(p.creator !== p.receiver)?_c('span',[_vm._v(\"(receiver @\"+_vm._s(p.receiver)+\")\")]):_vm._e()]),_c('div',[_c('router-link',{attrs:{\"to\":p.url}},[_vm._v(_vm._s(p.subject))])],1),_c('div',[_c('small',[_vm._v(\"id #\"+_vm._s(p.id))]),_c('span',{staticClass:\"badge ml-2\",class:{'badge-primary':p.active,'badge-warning':!p.active}},[_vm._v(_vm._s(p.status))])])]),_c('div',{staticClass:\"col-md-4\"},[_vm._v(\"From \"+_vm._s(p.start_date)+\" to \"+_vm._s(p.end_date)+\" (\"+_vm._s(p.total_time)+\")\")]),_c('div',{staticClass:\"col-md-2\"},[_vm._v(_vm._s(p.daily_pay)+\" daily\")]),_c('div',{staticClass:\"col-md-2\"},[_vm._v(_vm._s(p.votes_sp))])])])}),0)]),(this.$store.state.auth.logged)?_c('div',{staticClass:\"row mt-4\"},[_c('div',{staticClass:\"form-group col-12\"},[_c('button',{staticClass:\"btn btn-primary btn-large mr-2\",attrs:{\"disabled\":_vm.saving},on:{\"click\":_vm.save}},[(_vm.saving)?_c('div',{staticClass:\"mini loader\"}):_vm._e(),_vm._v(\"Save\")]),_c('button',{staticClass:\"btn btn-secondary btn-large\",on:{\"click\":_vm.reset}},[_vm._v(\"Reset\")])])]):_vm._e(),(_vm.alert.info)?_c('div',{staticClass:\"alert alert-info\",attrs:{\"role\":\"alert\"}},[_vm._v(_vm._s(_vm.alert.infoText))]):_vm._e(),(_vm.alert.success)?_c('div',{staticClass:\"alert alert-success\",attrs:{\"role\":\"alert\"},domProps:{\"innerHTML\":_vm._s(_vm.alert.successText)}}):_vm._e(),(_vm.alert.danger)?_c('div',{staticClass:\"alert alert-danger\",attrs:{\"role\":\"alert\"}},[_vm._v(_vm._s(_vm.alert.dangerText))]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <HeaderEFTG ref=\"headerEFTG\" v-on:login=\"onLogin\" v-on:logout=\"onLogout\"></HeaderEFTG>\r\n    <div class=\"container\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-6\">\r\n          <h2>Proposals</h2>\r\n          <div v-if=\"steemdao.name\">Total fund: {{steemdao.balance}}</div>\r\n          <div v-if=\"steemdao.name\">Daily budget: {{steemdao.daily_budget}}</div>\r\n          <div v-if=\"steemdao.name\">Budget for the next hour: {{steemdao.hourly_budget}}</div>\r\n        </div>\r\n        <div v-if=\"refAccount\" class=\"col-md-6 text-right\">\r\n          <div class=\"big-image-profile\" v-bind:style=\"{ backgroundImage: 'url(' + refAccount.image + ')' }\"></div>\r\n          <h3>@{{refAccount.name}}</h3>\r\n          <div>{{refAccount.votes_sp}}</div>\r\n          <div>{{refAccount.votes_description}}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"row mt-3\">\r\n        <div class=\"col-md-2 mr-2 mt-1\">\r\n          <input type=\"text\" placeholder=\"Account\" v-model=\"checkVotesAccount\" @keyup.enter=\"checkVotes\" class=\"form-control mr-2\":class=\"{'is-invalid': error.check_votes_account}\"/>\r\n          <div v-if=\"error.check_votes_account\" class=\"invalid-feedback\">{{ errorText.check_votes_account }}</div>\r\n        </div>\r\n        <div class=\"col-md-2 mt-1\">\r\n          <button class=\"btn btn-primary\" @click=\"checkVotes\">Check votes</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"row mb-3\">\r\n        <div class=\"col-12 text-right\">\r\n          <select v-model=\"sort_order\">\r\n            <option value=\"votes\">Sort by votes</option>\r\n            <option value=\"start_date\">Sort by start date</option>\r\n            <option value=\"end_date\">Sort by end date</option>\r\n            <option value=\"total_days\">Sort by total days</option>\r\n            <option value=\"id\">Sort by id</option>\r\n            <option value=\"status\">Sort by status</option>\r\n            <option value=\"creator\">Sort by creator</option>\r\n            <option value=\"receiver\">Sort by receiver</option>\r\n            <option value=\"daily_pay\">Sort by daily pay</option>\r\n            <option value=\"total_pay\">Sort by total pay</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div class=\"card mb-2\">\r\n        <ul class=\"list-group list-group-flush\">\r\n          <li v-for=\"(p,index) in proposals\" :key=\"index\"\r\n            class=\"list-group-item\"\r\n            :class=\"{\r\n              'total-funding':   p.funding_percent==1,\r\n              'partial-funding': p.funding_percent >0 && p.funding_percent < 1,\r\n              'no-funding':      p.funding_percent <=0\r\n            }\"\r\n            @click=\"selectProposal(index)\"\r\n          >\r\n            <div class=\"row\">\r\n              <div class=\"col-md-3\">\r\n                <div class=\"image-profile mr-2\" :style=\"{ backgroundImage: 'url(' + p.image + ')' }\"></div>\r\n                <span>{{p.creator}} <span v-if=\"p.creator !== p.receiver\">(receiver @{{p.receiver}})</span></span>\r\n                <div><router-link :to=\"p.url\">{{p.subject}}</router-link></div>\r\n                <div><small>id #{{p.id}}</small><span class=\"badge ml-2\" :class=\"{'badge-primary':p.active,'badge-warning':!p.active}\">{{p.status}}</span> </div>\r\n              </div>\r\n              <div class=\"col-md-4\">From {{p.start_date}} to {{p.end_date}} ({{p.total_time}})</div>\r\n              <div class=\"col-md-2\">{{p.daily_pay}} daily</div>\r\n              <div class=\"col-md-2\">{{p.votes_sp}}</div>\r\n              <!-- <div class=\"col-md-1 text-right\">\r\n                <button class=\"btn\" v-on:click.stop=\"toggleVote(index)\" :class=\"{'btn-primary':p.newVote, 'btn-secondary':!p.newVote}\">\r\n                  <font-awesome-icon icon=\"check\"/>\r\n                </button>\r\n              </div> -->\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div v-if=\"this.$store.state.auth.logged\" class=\"row mt-4\">\r\n        <div class=\"form-group col-12\">\r\n          <button @click=\"save\" class=\"btn btn-primary btn-large mr-2\" :disabled=\"saving\"><div v-if=\"saving\" class=\"mini loader\"></div>Save</button>\r\n          <button @click=\"reset\" class=\"btn btn-secondary btn-large\">Reset</button>\r\n        </div>            \r\n      </div>\r\n      <div v-if=\"alert.info\" class=\"alert alert-info\" role=\"alert\">{{alert.infoText}}</div>\r\n      <div v-if=\"alert.success\" class=\"alert alert-success\" role=\"alert\" v-html=\"alert.successText\"></div>\r\n      <div v-if=\"alert.danger\"  class=\"alert alert-danger\" role=\"alert\">{{alert.dangerText}}</div>\r\n    </div>    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HeaderEFTG from '@/components/HeaderEFTG'\r\nimport SteemClient from '@/mixins/SteemClient.js'\r\nimport Alerts from '@/mixins/Alerts.js'\r\nimport Utils from '@/js/utils.js'\r\nimport router from '@/router.js'\r\n\r\nimport Config from '@/config.js'\r\nimport ChainProperties from '@/mixins/ChainProperties.js'\r\n\r\n\r\nexport default {\r\n  name: 'ProposalsPage',\r\n  \r\n  data() {\r\n    return {\r\n      proposals: [],\r\n      sort_order: 'votes',\r\n      steemdao: {},\r\n      saving: false,\r\n      checkVotesAccount: '',\r\n      refAccount: null,\r\n      error: {\r\n        check_votes_account: false\r\n      },\r\n      errorText: {\r\n        check_votes_account: ''\r\n      },\r\n    }\r\n  },\r\n\r\n  components: {\r\n    HeaderEFTG\r\n  },\r\n\r\n  mixins: [\r\n    ChainProperties,\r\n    SteemClient,\r\n    Alerts\r\n  ],\r\n\r\n  created() {\r\n    this.getChainProperties().then( ()=>{\r\n      this.getProposals()\r\n    })\r\n  },\r\n\r\n  watch: {\r\n    sort_order: function(new_order){ this.sortBy(new_order) },\r\n  },\r\n\r\n  methods: {\r\n    async getSteemDao(){\r\n      try{\r\n        var accounts = await this.steem_database_call('get_accounts',[['blurt.dao']])\r\n        this.steemdao = accounts[0]\r\n        console.log(this.steemdao);\r\n        this.steemdao.daily_budget = (parseFloat(this.steemdao.balance)/100).toFixed(3) + ' ' + Config.SP\r\n        this.steemdao.hourly_budget = (parseFloat(this.steemdao.balance)/(24*100)).toFixed(3) + ' ' + Config.SP\r\n      }catch(error){\r\n        this.showDanger('Problems loading steem.dao')\r\n        throw error\r\n      }\r\n    },\r\n\r\n    async getProposals(){\r\n      console.log('get')\r\n      this.proposals = []\r\n      await this.getSteemDao()\r\n      var proposals = await this.steem_database_call('list_proposals',[['',0],100,'by_creator'])\r\n      for(var i in proposals){\r\n        var p = proposals[i]\r\n        var delta_t = new Date(p.end_date) - new Date(p.start_date)\r\n        p.url = Config.EXPLORER + '@' + p.creator + '/' + p.permlink\r\n        p.image = 'https://img.blurt.world/profileimage/'+p.creator\r\n        p.votes_sp = this.witnessVotes2sp(p.total_votes)\r\n        p.vote = false\r\n        p.newVote = false\r\n        p.total_time = Utils.textTime(delta_t)\r\n        p.total_pay = (parseFloat(p.daily_pay) * delta_t / (1000*60*60*24)).toFixed(3) + ' ' + Config.SP\r\n        p.active = this.isActive(p)\r\n        p.status = p.active ? 'started' : 'upcoming'\r\n        this.proposals.push(p)\r\n      }\r\n      this.sortPayments()\r\n      this.sortBy(this.sort_order)\r\n      if(this.$store.state.auth.logged) this.loadVotesFromAccount()\r\n      this.loadVotesNoActive()\r\n    },\r\n\r\n    sortPayments(){\r\n      this.sortBy('votes')\r\n      var budget = parseFloat(this.steemdao.sbd_balance)/100\r\n      for(var i in this.proposals){\r\n        var p = this.proposals[i]\r\n        if(p.status === 'upcoming'){\r\n          p.funding_percent = -1\r\n          continue\r\n        }\r\n        var daily_payment = parseFloat(p.daily_pay)\r\n        if(daily_payment <= budget){\r\n          p.funding_percent = 1\r\n          budget -= daily_payment\r\n        }else{\r\n          p.funding_percent = budget/daily_payment\r\n          budget = 0\r\n        }\r\n      }\r\n    },\r\n\r\n    sortBy(type){\r\n      switch(type){\r\n        case 'votes':\r\n          this.proposals.sort( (a,b)=>{ return parseInt(b.total_votes) - parseInt(a.total_votes) })\r\n          return\r\n        case 'start_date':\r\n          this.proposals.sort( (a,b)=>{ return new Date(a.start_date) - new Date(b.start_date) })\r\n          return\r\n        case 'end_date':\r\n          this.proposals.sort( (a,b)=>{ return new Date(a.end_date) - new Date(b.end_date) })\r\n          return\r\n        case 'total_days':\r\n          this.proposals.sort( (a,b)=>{ return (new Date(b.end_date) - new Date(b.start_date))\r\n                                              -(new Date(a.end_date) - new Date(a.start_date)) })\r\n          return\r\n        case 'creator':\r\n          this.proposals.sort( (a,b)=>{ return a.creator.localeCompare(b.creator) })\r\n          return\r\n        case 'receiver':\r\n          this.proposals.sort( (a,b)=>{ return a.receiver.localeCompare(b.receiver) })\r\n          return\r\n        case 'daily_pay':\r\n          this.proposals.sort( (a,b)=>{ return parseFloat(b.daily_pay) - parseFloat(a.daily_pay) })\r\n          return\r\n        case 'total_pay':\r\n          this.proposals.sort( (a,b)=>{ return (new Date(b.end_date) - new Date(b.start_date)) * parseFloat(b.daily_pay)\r\n                                              -(new Date(a.end_date) - new Date(a.start_date)) * parseFloat(a.daily_pay) })\r\n          return\r\n        case 'status':\r\n          this.proposals.sort( (a,b)=>{\r\n            var activeA = this.isActive(a)\r\n            var activeB = this.isActive(b)\r\n            if( activeA == activeB ) return parseInt(b.total_votes) - parseInt(a.total_votes) //sort by votes\r\n            if( activeA && !activeB ) return -1\r\n            if( !activeA && activeB ) return 1\r\n          })\r\n          return\r\n        case 'id':\r\n          this.proposals.sort( (a,b)=>{ return parseInt(a.id) - parseInt(b.id) })\r\n          return\r\n        default:\r\n          throw new Error(`The type '${type}' for sort does not exists`)\r\n      }\r\n    },\r\n\r\n    isActive(proposal){\r\n      var now = Date.now()\r\n      return now <= new Date(proposal.end_date+'Z') && now >= new Date(proposal.start_date+'Z')\r\n    },\r\n\r\n    /**\r\n     * ISSUE: https://github.com/steemit/steem/issues/3488\r\n     * This call is not necessary after this issue is solved\r\n     */ \r\n    async loadVotesNoActive(){\r\n      for(var i in this.proposals){\r\n        var proposal = this.proposals[i]\r\n        if(this.isActive(proposal)) continue\r\n        proposal.total_votes = 0\r\n        var from = ''\r\n        var break_while = false\r\n        var voters = []\r\n        while(!break_while){\r\n          var votes = await this.steem_database_call('list_proposal_votes',[[proposal.id,from],100,'by_proposal_voter'])\r\n          if(votes.length == 0) break\r\n          console.log(`Votes: length: ${votes.length}. from '${votes[0].voter}' to '${votes[votes.length-1].voter}'`)\r\n\r\n          if(votes.length == 1){\r\n            break_while = true\r\n            if(votes[0].proposal.id == proposal.id) voters.push(votes[0].voter)\r\n          }else{\r\n            for(var j=0; j<votes.length-1; j++){ //don't take the last one. It is for the next round\r\n              if(votes[j].proposal.id !== proposal.id){\r\n                break_while = true\r\n                break\r\n              }\r\n              voters.push(votes[j].voter) \r\n            }\r\n          }\r\n          from = votes[votes.length-1].voter\r\n        }\r\n        console.log(`voters of id ${proposal.id}`)\r\n        console.log(voters)\r\n        var accounts = await this.steem_database_call('get_accounts',[voters])\r\n        for(var j in accounts){\r\n          proposal.total_votes += parseInt(this.witness_vote_weight(accounts[j]))\r\n        }\r\n        console.log(`total votes ${proposal.total_votes}`)\r\n        proposal.votes_sp = this.witnessVotes2sp(proposal.total_votes)\r\n        this.$set(this.proposals, i, proposal)\r\n      }\r\n      this.sortPayments()\r\n      this.sortBy(this.sort_order)\r\n    },\r\n\r\n    witness_vote_weight(account) {\r\n      if(account.proxy !== '') return 0\r\n      return this.no_proxy_vote_weight(account) + this.proxy_vote_weight(account)\r\n    },\r\n\r\n    no_proxy_vote_weight(account){\r\n      return Math.floor(parseFloat(account.vesting_shares)*1e6)\r\n    },\r\n\r\n    proxy_vote_weight(account) {\r\n      var total = 0\r\n      for(var i in account.proxied_vsf_votes)\r\n        total += parseInt(account.proxied_vsf_votes[i])\r\n      return total\r\n    },\r\n\r\n    calculate_vote(account) {\r\n      var vote = {\r\n        voter: account.name,\r\n        votes: this.witness_vote_weight(account),\r\n        no_proxy_votes: this.no_proxy_vote_weight(account),\r\n        proxy_votes: this.proxy_vote_weight(account),\r\n      }\r\n      if(account.proxy === ''){ //no proxy set\r\n        vote.votes_sp = this.witnessVotes2sp(vote.votes)\r\n        if(vote.proxy_votes>0)\r\n          vote.votes_description = `(${this.witnessVotes2sp(vote.no_proxy_votes)} + ${this.witnessVotes2sp(vote.proxy_votes)} proxy)`\r\n        else\r\n          vote.votes_description = ''\r\n      }else{\r\n        vote.votes_sp = this.witnessVotes2sp(0)\r\n        vote.votes_description = `(${this.witnessVotes2sp(vote.no_proxy_votes)}`\r\n        if(vote.proxy_votes>0)\r\n          vote.votes_description += ` + ${this.witnessVotes2sp(vote.proxy_votes)} proxy,`\r\n        vote.votes_description += ` proxied to @${account.proxy})`\r\n      }\r\n      return vote\r\n    },\r\n\r\n    async checkVotes() {\r\n      this.user_votes = false\r\n      this.error.check_votes_account = false\r\n      try{\r\n        await this.loadVotesFromAccount(this.checkVotesAccount)\r\n      }catch(error){\r\n        this.error.check_votes_account = true\r\n        this.errorText.check_votes_account = error.message\r\n        throw error\r\n      }\r\n    },\r\n\r\n    async loadVotesFromAccount(accountName){\r\n      if(!accountName){\r\n        accountName = this.$store.state.auth.user\r\n        this.user_votes = true\r\n      }\r\n      this.clearVotes()\r\n      var accounts = await this.steem_database_call('get_accounts',[[accountName]])\r\n      if(!accounts || accounts.length==0) throw new Error(`@${accountName} does not exist`)\r\n      this.refAccount = accounts[0]\r\n      this.refAccount.image = 'https://images.blurt.blog/u/'+accountName+'/avatar'\r\n      var vote = this.calculate_vote(this.refAccount)\r\n      this.refAccount.votes_sp = vote.votes_sp\r\n      this.refAccount.votes_description = vote.votes_description\r\n\r\n      var account_votes = await this.steem_database_call('list_proposal_votes',[[accountName,0],100,'by_voter_proposal'])\r\n      var proposalsNotTop = []\r\n      for(var i in account_votes){\r\n        var vote = account_votes[i]\r\n        if(vote.voter !== accountName) break\r\n        var index = this.proposals.findIndex( (p)=>{ return p.id === vote.proposal.id })\r\n        if(index >= 0){\r\n          var proposal = this.proposals[index]\r\n          proposal.vote = true\r\n          proposal.newVote = true\r\n          this.$set(this.proposals, index, proposal)\r\n        }else{\r\n          proposalsNotTop.push(vote)\r\n        }\r\n        //console.log(this.proposals)\r\n      }\r\n      if(proposalsNotTop.length > 0) {\r\n        console.log('TODO: these proposals are already voted but they are not in the TOP list:')\r\n        console.log(proposalsNotTop)\r\n      }\r\n      console.log('end')\r\n    },\r\n\r\n    selectProposal(index){\r\n      var proposal = this.proposals[index]\r\n      router.push({ name: 'Proposal', params:{id:proposal.id} })\r\n    },\r\n\r\n    toggleVote(index){\r\n      if(this.refAccount){\r\n        if(!this.$store.state.auth.logged) return\r\n        if(this.refAccount.name !== this.$store.state.auth.user) return\r\n      }\r\n      var p = this.proposals[index]\r\n      p.newVote = !p.newVote\r\n      this.$set(this.proposals, index, p)\r\n    },\r\n\r\n    save(){\r\n      var user = this.$store.state.auth.user\r\n      var activeKey = this.$store.state.auth.keys.active\r\n      var ownerKey  = this.$store.state.auth.keys.owner\r\n      var privKey = null\r\n\r\n      if( activeKey != null ) {\r\n        privKey = activeKey\r\n      }else if(ownerKey != null ) {\r\n        privKey = ownerKey \r\n      }else {\r\n        this.showDanger('Please login with master, owner, or active key')\r\n        return \r\n      }\r\n\r\n      var proposals = this.proposals.slice()\r\n\r\n      var approve_id_proposals = []\r\n      var unapprove_id_proposals = []\r\n      for(var i in proposals) {\r\n        var p = proposals[i]\r\n\r\n        if(p.newVote != p.vote) {\r\n          if(p.newVote === true) approve_id_proposals.push(p.id)\r\n          else unapprove_id_proposals.push(p.id)\r\n        }\r\n      }\r\n\r\n      if(approve_id_proposals.length == 0 && unapprove_id_proposals.length == 0) {\r\n        this.showDanger('Nothing to change')\r\n        return\r\n      }\r\n\r\n      var ops = []\r\n      approve_id_proposals.sort( (a,b)=>{return a-b})\r\n      unapprove_id_proposals.sort( (a,b)=>{return a-b})\r\n\r\n      var j=0\r\n      for(var i=0; i<approve_id_proposals.length; i++){\r\n        if(j%Config.STEEM_PROPOSAL_MAX_IDS_NUMBER == 0){\r\n          ops.push([\r\n            'update_proposal_votes',\r\n            {\r\n              voter: user,\r\n              proposal_ids: [],\r\n              approve: true,\r\n              extensions: []\r\n            }\r\n          ])\r\n        }\r\n        ops[ops.length-1][1].proposal_ids.push( approve_id_proposals[i] )\r\n        j++\r\n      }\r\n\r\n      var j=0\r\n      for(var i=0; i<unapprove_id_proposals.length; i++){\r\n        if(j%Config.STEEM_PROPOSAL_MAX_IDS_NUMBER == 0){\r\n          ops.push([\r\n            'update_proposal_votes',\r\n            {\r\n              voter: user,\r\n              proposal_ids: [],\r\n              approve: false,\r\n              extensions: []\r\n            }\r\n          ])\r\n        }\r\n        ops[ops.length-1][1].proposal_ids.push( unapprove_id_proposals[i] )\r\n        j++\r\n      }\r\n\r\n      this.saving = true\r\n      this.hideSuccess()\r\n      this.hideDanger()\r\n      this.hideInfo()\r\n\r\n      let self = this\r\n\r\n      this.steem_broadcast_sendOperations(ops,privKey)\r\n      .then(function(result){\r\n        self.saving = false\r\n        self.showSuccess(`<a href=\"${Config.EXPLORER2}b/${result.block_num}/${result.id}\" class=\"alert-link\" target=\"_blank\">Votes saved!</a>`)\r\n        self.loadVotesFromAccount()\r\n      })\r\n      .catch(function(error){\r\n        self.saving = false\r\n        self.showDanger(error.message)\r\n        console.log('operations')\r\n        console.log(ops)\r\n        throw error\r\n      })\r\n    },\r\n\r\n    reset(){\r\n      for(var i in this.proposals) {\r\n        var p = this.proposals[i]\r\n        p.newVote = JSON.parse(JSON.stringify(p.vote))\r\n        this.$set(this.proposals, i, p)\r\n      }\r\n      this.hideSuccess()\r\n      this.hideDanger()\r\n      this.hideInfo()\r\n    },\r\n\r\n    clearVotes() {\r\n      for(var i in this.proposals) {\r\n        var p = this.proposals[i]\r\n        p.vote = false\r\n        p.newVote = false\r\n        this.$set(this.proposals, i, p)\r\n      }      \r\n    },\r\n\r\n    onLogin() {\r\n      this.loadVotesFromAccount()\r\n      this.hideSuccess()\r\n      this.hideDanger()\r\n      this.hideInfo() \r\n    },\r\n    \r\n    onLogout() {\r\n      this.clearVotes()\r\n      this.hideSuccess()\r\n      this.hideDanger()\r\n      this.hideInfo()\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.hash {\r\n  font-family: monospace;\r\n  //font-size: 1.3rem;\r\n  overflow-wrap: break-word;\r\n}\r\n\r\n.big-image-profile {\r\n  display: inline-block;\r\n  height: 3.5rem;\r\n  width: 3.5rem;\r\n  overflow: hidden;\r\n  background-size: cover;\r\n  background-position: center center;\r\n  border-radius: 50%;\r\n  vertical-align: middle;\r\n}\r\n\r\n.total-funding {\r\n  background-color: #e8ffef;\r\n}\r\n\r\n.partial-funding {\r\n  background-color: #e3e2f7;\r\n}\r\n\r\n.no-funding {\r\n  background-color: #fff8e8;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalsPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalsPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProposalsPage.vue?vue&type=template&id=5b96786f&scoped=true&\"\nimport script from \"./ProposalsPage.vue?vue&type=script&lang=js&\"\nexport * from \"./ProposalsPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProposalsPage.vue?vue&type=style&index=0&id=5b96786f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b96786f\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalsPage.vue?vue&type=style&index=0&id=5b96786f&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalsPage.vue?vue&type=style&index=0&id=5b96786f&scoped=true&lang=css&\""],"sourceRoot":""}